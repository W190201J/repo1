<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
    <meta name="description" content="" />
    <meta name="viewport" content="user-scalable=no">
    
    <meta name="google-site-verification" content="BstJA3X9z6f9HcvoN9AZTwaKo_9Abj_j7dVBPfy640s" />
    <meta name="baidu-site-verification" content="IYCrtVH0i1" />
    <meta property="wb:webmaster" content="239d3d1dbdde1b2c" />
    <link rel="icon" type="image/png" href="images/favicon.ico"/>
    
    <script type="text/javascript">
        
        (function(document, screen) {if (screen.width < 760) {document.location.href="/mobile/";}}(document, screen));
    </script>
    
    <link rel="stylesheet" href="css/common.css?v=2015-5-20"/>
    
    <link rel="stylesheet" href="css/user_center.css"/>
    
    <link rel="stylesheet" type="text/css" href="css/reset.css" />
    <link rel="stylesheet" href="css/common.css"/>
    <link rel="stylesheet" href="css/login.css"/>

    <title>注册</title>
</head>
<body>
        <header id="header" class="">
        <div class="common-width">
            
                <section class="clearfix">
                    <h1 class="logo" title="外卖超人">
                        <a href="index.html"></a>
                    </h1>
                    <span class="page-name"> 注册</span>
                </section>
                
            
        </div>
    </header>
    
    <section class="main">
    <div class="common-width">
            
    <div class="main-inner">
        
    <div class="log-box" id="registerPageBox">
        <div class="form-group w275">
            <label for="">手机号码</label>
            <input type="text" id="phone" name="phone" maxlength="11" class="form-text" placeholder="请输入你的手机号码" />
        </div>
        <div class="form-group w275">
            <label for="">请选择注册角色</label>
            <select id ="role" name ="role">
              <option value ="0">我是用户</option>
			  <option value ="1">我是店家</option>
			</select>
        </div>
        <div class="form-error-message"></div>

        <div class="captcha-wrap">
            <div class="captcha-box" id="captchaBox" style="margin-left: -300px">
                <div class="captcha-item">
                    <div class="form-group captcha clearfix">
                        <input type="text" id="rCaptcha" class="form-text" placeholder="短信验证码"/>
                        <input type="button" id="getCaptcha"  class="captcha-btn" value="获取验证码"/>
                    </div>
                    <div class="form-error-message"></div>
                </div>
                <div class="captcha-item">
                    <div class="form-group captcha clearfix">
                        <input type="text" id="imgCaptcha"  maxlength="4" class="form-text" placeholder="输入验证码"/>
                        <span><img id="captchaImg" onclick="change()" alt="看不清，换一张" title="看不清，换一张"/></span>
                    </div>
                    <div class="form-error-message"></div>
                </div>
            </div>
        </div>


        <div class="form-group w275">
            <label for="">登录密码</label>
            <input type="password" id="rPass1" maxlength="10" class="form-text" onpaste="return false" placeholder="输入登录密码 6-10个字符"/>
        </div>
        <div class="form-error-message"></div>    
        <div class="form-group w275">
            <input type="password" id="rPass2" maxlength="10" class="form-text" onpaste="return false" placeholder="输入登录密码 6-10个字符"/>
        </div>
        <div class="form-error-message"></div>
 
        <div>
            <button onclick="add()" class="form-btn" id="registerPageBtn">确认注册</button>
        </div>
        
    </div>

    </div>

        </div>
    </section>
    <!-- Baidu Analytics -->
    <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
	<script type="text/javascript" src="js/jquery.serializejson.min.js"></script>
	<script type="text/javascript" src="js/jwt.js"></script>
	<script type="text/javascript" src="static/layer/2.4/layer.js"></script>
	<script type="text/javascript" src="js/initMember.js"></script>
	<script type="text/javascript">
	function changePass(){
		
	 	var oldpass = $("#old").val();
		var newpass1 = $("#new1").val();
		var newpass2 = $("#new2").val();
		var phone = $("#phone").text();
		
		if(newpass1!=null&&newpass1==newpass2){
			 $.ajax({
				url:'/login',
				method:'post',
				data:{phone:phone,password:oldpass},
				success:function (data){			
					if(data[0]==1){
						$.ajax({
							url:'/changPass',
							method:'put',
							data:{phone:phone,password:newpass2},
							success:function (data){
								
								if(data=='1'){
									layer.msg("修改成功",{icon: 6,time: 2000,
										end:function(){
											location.href = "member_index.html";		
										}
									});
								}else{
									layer.msg('密码修改失败，请重试');
								}
							},
							
							dataType:'text'
						}); 
					}else{
						layer.msg('旧密码错误，请重试');
					}
				},
				
				dataType:'json'
			}); 
			 
		}else {
			layer.msg('两次密码输入不一致');
		} 
		 
		
		
	}
	
	
	</script>
</body>
</html>
